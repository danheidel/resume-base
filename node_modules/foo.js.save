var db = require('mysql');
var dbPool;

exports.initDbPool = function(dbVars){
  dbPool = db.createPool(dbVars);
}

exports.dbQuery = function(query, callback){
  //consumes callback(err, results)
  dbPool.getConnection(function(err, connection){
    if(err){
      console.log('error getting connection fron pool: ' + err);
      callback(err, null);
      return;
    }
    connection.query(query, function(err, results){
      connection.release();
      if(err){
        console.log('error during query: ' + err);
        callback(err, null);
        return;
      }
      callback(null, results);
    });
  });
};

exports.isNumber = function(iNum){
  return !isNaN(parseFloat(iNum)) && isFinite(iNum);
}
